<!DOCTYPE html>
<html lang="en" class="fullheight">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <style type="text/css">
    .fullheight {
        height: 100%;
    }
    </style>
    <script type="text/javascript">
    var countStrs = ["③", "②", "①"];
    var gStrs = ["第{0}组", "第一组", "第二组", "第三组", "第四组", "第五组", "第六组", "第七组", "第八组", "第九组"];
    var qStrs = ["第{1}题", "第1题", "第2题", "第3题"];
    var headText = "学前组视频心算题 -";
    var gIndex = 1;
    var qIndex = 1;
    var gObjs = new Array(10);
    var gMixObjs = new Array(10);

    function repeat(begin, end, time, func) {
        return function() {
            func.call(null, begin, end);
            if (begin < end) {
                if (begin++ < end) {
                    setTimeout(repeat(begin, end, time, func), time);
                }
            } else if (begin > end) {
                if (begin-- > end) {
                    setTimeout(repeat(begin, end, time, func), time);
                }
            } else {}
        };
    }

    function showQuiz(begin, end) {
        if (begin == end) {
            $(".card-text").text("");
            $("#go").removeClass("disabled");
            $("#go").attr("disabled", false);
        } else {
            $(".card-text").text(gObjs[gIndex].nums[begin]);
        }
    }

    function showCount(begin, end) {
        if (begin == end) {
            $(".card-text").text("");
            setTimeout(repeat(0, gObjs[gIndex].total, gObjs[gIndex].millisec / gObjs[gIndex].total, showQuiz), 0);
        } else {
            $(".card-text").text(countStrs[begin]);
        }
    }

    function showAnswer() {
        if ($(".card-text").text().length > 0) {
            $(".card-text").text("");
        } else {
            $(".card-text").text(gObjs[gIndex].answer);
        }
    }

    function init() {
        $(".card-header").text(headText + " " + gStrs[gIndex] + " " + qStrs[qIndex]);
        gObjs[1] = new Group1();
        gObjs[2] = new Group2();
        gObjs[3] = new Group3();
        gObjs[4] = new Group4();
        gObjs[5] = new Group5();
        gObjs[6] = new Group6();
        gObjs[7] = new Group7();
        gObjs[8] = new Group8();
        gObjs[9] = new Group9();
    }

    function prevGroup() {
        if (gIndex > 0) {
            gIndex--;
            qIndex = 1;
            if (gIndex <= 1) {
                $("#prev").addClass("disabled");
                $("#prev").attr("disabled", true);
            }
            if (gIndex < (gStrs.length - 1)) {
                $("#next").removeClass("disabled");
                $("#next").attr("disabled", false);
            }
            $(".card-header").text(headText + " " + gStrs[gIndex] + " " + qStrs[qIndex]);
        }
    }

    function nextGroup() {
        if (gIndex < (gStrs.length - 1)) {
            gIndex++;
            qIndex = 1;
            if (gIndex > 1) {
                $("#prev").removeClass("disabled");
                $("#prev").attr("disabled", false);
            }
            if (gIndex >= (gStrs.length - 1)) {
                $("#next").addClass("disabled");
                $("#next").attr("disabled", true);
            }
            $(".card-header").text(headText + " " + gStrs[gIndex] + " " + qStrs[qIndex]);
        }
    }

    function go() {
        if (qIndex > gObjs[gIndex].mix && gIndex < (gStrs.length - 1)) {
            nextGroup();
        }
        if (qIndex > gObjs[gIndex].mix && gIndex >= (gStrs.length - 1)) {
            $(".card-text").text("比赛结束");
        } else {
            $(".card-header").text(headText + " " + gStrs[gIndex] + " " + qStrs[qIndex]);
            gObjs[gIndex].generate(qIndex++);
            $("#go").addClass("disabled");
            $("#go").attr("disabled", true);
            setTimeout(repeat(0, 3, 1000, showCount), 0);
        }
    }
    </script>
</head>

<body class="fullheight" onload="init();">
    <div class="card card-inverse text-center fullheight" style="background-color: #333; border-color: #333;">
        <div class="card-header" style="font-size: 5vw">
            学前组视频心算题 - 第一组 第1题
        </div>
        <div class="card-block" style="display: flex;" onclick="showAnswer();">
            <h1 class="card-text" style="margin: auto; font-size: 18vw; font-family: Times">点击开始</h1>
        </div>
        <div class="card-footer text-muted">
            <div class="row">
                <div class="col">
                    <button id="prev" type="button" class="btn btn-outline-danger disabled" style="font-size: 5vw" onclick="prevGroup();" disabled="disabled">上一组</button>
                    <button id="go" type="button" class="btn btn-outline-success" style="font-size: 5vw" onclick="go();">出题</button>
                    <button id="next" type="button" class="btn btn-outline-danger" style="font-size: 5vw" onclick="nextGroup();">下一组</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js " integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n " crossorigin="anonymous "></script>
    <script src="jquery.number.min.js"></script>
    <script src="string-format.js"></script>
    <script src="Group.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js " integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb " crossorigin="anonymous "></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js " integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn " crossorigin="anonymous "></script>
</body>

</html>
